// ==========================================================================
// GRIDDLE
// modified from https://github.com/necolas/griddle/
// to remove "modifier" and replace with a "prefix" which is better suited 
// for Tanlinell CSS's grid system
// ==========================================================================

@mixin griddle-build($units, $prefix: 'gc') {
    @each $n in $units {
        // Avoid creating rules like `.unit-12-12 {}`
        $x: $n - 1;

        @for $i from 1 through $x {
            // Initialize variables
            $i-r: 0;
            $n-r: 0;

            // Find the greatest common factor
            $g: gcf($i, $n);

            @if $g > 1 {
                // Reduced value of $i
                $i-r: $i/$g;
                // Reduced value of $n
                $n-r: $n/$g;
            }

            // Check if the reduced value of $n was also supplied in the list
            // of units to be built
            $canreduce: contains($units, $n-r);

            // Create units based on fractions
            .#{$prefix}#{$i}-#{$n} {
                // If this unit can be reduced then extend the previous rule
                @if $canreduce {
                    @extend .#{$prefix}#{$i-r}-#{$n-r};
                }
                // Otherwise create a new % width
                @else {
                    width: percentage($i / $n);
                }
            }
        }
    }
}